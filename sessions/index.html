<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sessions - Heritage Effort System</title>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400&family=Inter:wght@400;500;600&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Heritage Paper Foundation */
            --paper-base: #FAF7F0;
            --paper-aged: #F5F1E8;
            --paper-shadow: #EAE5D8;
            --paper-edge: #E0D9CC;
            
            /* Writer's Ink System */
            --ink-black: #1A1A1A;
            --ink-dark: #2D2D2D;
            --ink-medium: #4A4A4A;
            --ink-light: #6B6B6B;
            --ink-faded: #8B8B8B;
            
            /* Accent System */
            --leather-brown: #8B4513;
            --copper-accent: #B87333;
            --sage-green: #87A96B;
            --warm-red: #C85A54;
            
            /* Typography */
            --font-primary: 'Crimson Text', serif;
            --font-interface: 'Inter', sans-serif;
            --font-display: 'Playfair Display', serif;
            
            /* Shadow System */
            --shadow-paper: 0 1px 3px rgba(26, 26, 26, 0.04), 0 1px 2px rgba(26, 26, 26, 0.06);
            --shadow-lifted: 0 2px 8px rgba(26, 26, 26, 0.08), 0 1px 4px rgba(26, 26, 26, 0.08);
            --shadow-floating: 0 8px 24px rgba(26, 26, 26, 0.12), 0 4px 8px rgba(26, 26, 26, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-interface);
            background: var(--paper-base);
            color: var(--ink-black);
            line-height: 1.6;
        }

        .heritage-icon {
            width: 24px;
            height: 24px;
            stroke: currentColor;
            fill: none;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            display: inline-block;
            vertical-align: middle;
        }

        .heritage-icon.small { width: 18px; height: 18px; }
        .heritage-icon.large { width: 32px; height: 32px; }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 0 24px;
            min-height: 100vh;
        }

        /* Header */
        .header {
            padding: 32px 0;
            border-bottom: 1px solid var(--paper-edge);
            margin-bottom: 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .brand-text {
            font-family: var(--font-display);
            font-size: 28px;
            font-weight: 600;
            color: var(--ink-black);
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .timer-section { text-align: right; }

        .session-timer {
            font-family: var(--font-display);
            font-size: 32px;
            font-weight: 400;
            color: var(--ink-medium);
            margin-bottom: 4px;
            letter-spacing: 1px;
            transition: color 0.3s ease;
        }

        .session-timer.active { color: var(--sage-green); }

        .timer-label {
            font-size: 13px;
            color: var(--ink-light);
            font-style: italic;
        }

        .session-actions { display: flex; gap: 8px; }

        .session-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            font-family: var(--font-interface);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: var(--shadow-paper);
        }

        .session-btn.primary {
            background: var(--sage-green);
            color: var(--paper-base);
        }

        .session-btn.primary:hover {
            background: #7a9960;
            box-shadow: var(--shadow-lifted);
        }

        .session-btn.secondary {
            background: var(--paper-aged);
            color: var(--ink-dark);
            border: 1px solid var(--paper-edge);
        }

        .session-btn.secondary:hover {
            background: var(--paper-shadow);
            box-shadow: var(--shadow-lifted);
        }

        .session-btn.danger {
            background: var(--warm-red);
            color: var(--paper-base);
        }

        .session-btn.danger:hover {
            background: #b54d47;
            box-shadow: var(--shadow-lifted);
        }

        /* Page Intro */
        .page-intro {
            text-align: center;
            margin-bottom: 40px;
        }

        .page-title {
            font-family: var(--font-display);
            font-size: 32px;
            font-weight: 600;
            color: var(--ink-black);
            margin-bottom: 12px;
        }

        .page-description {
            font-family: var(--font-primary);
            font-size: 18px;
            color: var(--ink-medium);
            font-style: italic;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Capture Section */
        .capture-section {
            background: var(--paper-aged);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 48px;
            border: 1px solid var(--paper-edge);
            box-shadow: var(--shadow-paper);
        }

        .capture-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .capture-title {
            font-family: var(--font-display);
            font-size: 28px;
            font-weight: 600;
            color: var(--ink-dark);
            margin-bottom: 8px;
        }

        .capture-subtitle {
            font-family: var(--font-primary);
            font-size: 16px;
            color: var(--ink-medium);
            font-style: italic;
        }

        .capture-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .capture-type {
            background: var(--paper-base);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid var(--paper-edge);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: var(--shadow-paper);
        }

        .capture-type:hover {
            border-color: var(--copper-accent);
            box-shadow: var(--shadow-lifted);
            transform: translateY(-2px);
        }

        .capture-type:active { transform: translateY(0); }

        .capture-icon {
            margin-bottom: 16px;
            color: var(--copper-accent);
        }

        .capture-name {
            font-family: var(--font-display);
            font-size: 18px;
            font-weight: 600;
            color: var(--ink-dark);
            margin-bottom: 8px;
        }

        .capture-description {
            font-size: 14px;
            color: var(--ink-medium);
            line-height: 1.4;
        }

        /* Buckets Display */
        .buckets-section { margin-bottom: 48px; }

        .buckets-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .buckets-title {
            font-family: var(--font-display);
            font-size: 32px;
            font-weight: 600;
            color: var(--ink-black);
            margin-bottom: 8px;
        }

        .buckets-subtitle {
            font-family: var(--font-primary);
            font-size: 18px;
            color: var(--ink-medium);
            font-style: italic;
        }

        /* Individual Bucket */
        .bucket {
            margin-bottom: 40px;
        }

        .bucket-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--paper-edge);
        }

        .bucket-title {
            font-family: var(--font-display);
            font-size: 24px;
            font-weight: 600;
            color: var(--ink-dark);
            flex: 1;
        }

        .bucket-count {
            background: var(--copper-accent);
            color: var(--paper-base);
            font-size: 12px;
            font-weight: 600;
            padding: 4px 8px;
            border-radius: 12px;
            min-width: 24px;
            text-align: center;
        }

        .bucket-content {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }

        .effort-item {
            background: var(--paper-base);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--paper-edge);
            box-shadow: var(--shadow-paper);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .effort-item:hover {
            box-shadow: var(--shadow-lifted);
            border-color: var(--copper-accent);
        }

        .item-header {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-bottom: 12px;
        }

        .item-title {
            font-weight: 600;
            color: var(--ink-dark);
            font-size: 16px;
            line-height: 1.3;
            flex: 1;
        }

        .item-description {
            font-size: 14px;
            color: var(--ink-medium);
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .item-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            color: var(--ink-faded);
            font-family: var(--font-primary);
        }

        .item-time { font-style: italic; }
        .item-type { color: var(--copper-accent); }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--ink-light);
        }

        .empty-icon {
            margin-bottom: 16px;
            color: var(--ink-faded);
        }

        .empty-text {
            font-family: var(--font-primary);
            font-size: 16px;
            font-style: italic;
        }

        /* Capture Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(26, 26, 26, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--paper-base);
            border-radius: 16px;
            padding: 32px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-floating);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: scale(1);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .modal-title {
            font-family: var(--font-display);
            font-size: 24px;
            font-weight: 600;
            color: var(--ink-dark);
            margin-bottom: 8px;
        }

        .modal-subtitle {
            font-size: 14px;
            color: var(--ink-medium);
            font-style: italic;
        }

        .modal-content { margin-bottom: 24px; }

        .bucket-selector {
            margin-bottom: 24px;
        }

        .bucket-selector-label {
            display: block;
            font-weight: 500;
            margin-bottom: 12px;
            color: var(--ink-dark);
        }

        .bucket-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
        }

        .bucket-option {
            padding: 12px;
            border: 2px solid var(--paper-edge);
            border-radius: 8px;
            background: var(--paper-aged);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .bucket-option:hover {
            border-color: var(--copper-accent);
        }

        .bucket-option.selected {
            border-color: var(--sage-green);
            background: var(--sage-green);
            color: var(--paper-base);
        }

        .bucket-option-icon {
            display: block;
            margin-bottom: 8px;
        }

        .bucket-option-name {
            font-size: 14px;
            font-weight: 500;
        }

        .modal-actions {
            display: flex;
            justify-content: end;
            gap: 12px;
        }

        .modal-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn.secondary {
            background: var(--paper-shadow);
            color: var(--ink-dark);
        }

        .modal-btn.secondary:hover {
            background: var(--paper-edge);
        }

        .modal-btn.primary {
            background: var(--sage-green);
            color: var(--paper-base);
        }

        .modal-btn.primary:hover {
            background: #7a9960;
        }

        .modal-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Input Fields */
        .input-group {
            margin-bottom: 20px;
        }

        .input-label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--ink-dark);
        }

        .input-field {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--paper-edge);
            border-radius: 8px;
            background: var(--paper-aged);
            color: var(--ink-dark);
            font-family: var(--font-interface);
            resize: vertical;
            min-height: 100px;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--sage-green);
            box-shadow: 0 0 0 3px rgba(135, 169, 107, 0.1);
        }

        /* Audio Recording */
        .audio-controls {
            text-align: center;
            padding: 24px;
        }

        .record-btn {
            width: 80px;
            height: 80px;
            border: none;
            border-radius: 50%;
            background: var(--warm-red);
            color: var(--paper-base);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
        }

        .record-btn:hover {
            background: #b54d47;
            transform: scale(1.05);
        }

        .record-btn.recording {
            background: var(--sage-green);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(135, 169, 107, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(135, 169, 107, 0); }
            100% { box-shadow: 0 0 0 0 rgba(135, 169, 107, 0); }
        }

        .recording-status {
            font-size: 14px;
            color: var(--ink-medium);
        }

        /* Status Messages */
        .status-message {
            position: fixed;
            top: 24px;
            right: 24px;
            background: var(--sage-green);
            color: var(--paper-base);
            padding: 12px 20px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 500;
            box-shadow: var(--shadow-floating);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1001;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-message.show { transform: translateX(0); }

        /* Responsive */
        @media (max-width: 768px) {
            .container { padding: 0 16px; }
            .header { flex-direction: column; gap: 20px; text-align: center; }
            .capture-types { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; }
            .bucket-content { grid-template-columns: 1fr; }
        }

        /* Animations */
        .fade-in { animation: fadeIn 0.6s ease; }
        .slide-up { animation: slideUp 0.4s ease; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="brand-text">Effort</div>
            
            <div class="header-controls">
                <div class="timer-section">
                    <div class="session-timer" id="sessionTimer">00:00</div>
                    <div class="timer-label">Session Time</div>
                </div>
                
                <div class="session-actions">
                    <button class="session-btn primary" id="startBtn" onclick="startSession()">
                        <svg class="heritage-icon small" viewBox="0 0 24 24">
                            <polygon points="5,3 19,12 5,21"/>
                        </svg>
                        Start
                    </button>
                    <button class="session-btn secondary" id="pauseBtn" onclick="pauseSession()" style="display: none;">
                        <svg class="heritage-icon small" viewBox="0 0 24 24">
                            <rect x="6" y="4" width="4" height="16"/>
                            <rect x="14" y="4" width="4" height="16"/>
                        </svg>
                        Pause
                    </button>
                    <button class="session-btn danger" id="endBtn" onclick="endSession()" style="display: none;">
                        <svg class="heritage-icon small" viewBox="0 0 24 24">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        </svg>
                        End
                    </button>
                </div>
            </div>
        </header>

        <!-- Page Introduction -->
        <section class="page-intro">
            <h1 class="page-title">Document Your Creative Process</h1>
            <p class="page-description">Capture your creative effort using any format, organized by the phase of your work</p>
        </section>

        <!-- Capture Types Section -->
        <section class="capture-section">
            <div class="capture-header">
                <h2 class="capture-title">Capture Your Effort</h2>
                <p class="capture-subtitle">Choose how you want to document your creative process</p>
            </div>
            
            <div class="capture-types">
                <div class="capture-type" onclick="openCaptureModal('text')">
                    <svg class="heritage-icon large capture-icon" viewBox="0 0 24 24">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14,2 14,8 20,8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10,9 9,9 8,9"/>
                    </svg>
                    <h3 class="capture-name">Text Notes</h3>
                    <p class="capture-description">Written thoughts, ideas, and observations</p>
                </div>
                
                <div class="capture-type" onclick="openCaptureModal('audio')">
                    <svg class="heritage-icon large capture-icon" viewBox="0 0 24 24">
                        <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                        <line x1="12" y1="19" x2="12" y2="23"/>
                        <line x1="8" y1="23" x2="16" y2="23"/>
                    </svg>
                    <h3 class="capture-name">Audio</h3>
                    <p class="capture-description">Voice memos and spoken reflections</p>
                </div>
                
                <div class="capture-type" onclick="openCaptureModal('screenshot')">
                    <svg class="heritage-icon large capture-icon" viewBox="0 0 24 24">
                        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                        <circle cx="12" cy="13" r="4"/>
                    </svg>
                    <h3 class="capture-name">Screenshots</h3>
                    <p class="capture-description">Visual captures with optional annotations</p>
                </div>
                
                <div class="capture-type" onclick="openCaptureModal('file')">
                    <svg class="heritage-icon large capture-icon" viewBox="0 0 24 24">
                        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"/>
                        <polyline points="13,2 13,9 20,9"/>
                        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                    <h3 class="capture-name">URLs & Files</h3>
                    <p class="capture-description">Links, documents, and resources with annotations</p>
                </div>
            </div>
        </section>

        <!-- Buckets Display -->
        <section class="buckets-section">
            <div class="buckets-header">
                <h2 class="buckets-title">Your Creative Process</h2>
                <p class="buckets-subtitle">Organized by the phase of your creative work</p>
            </div>

            <!-- Research and Ideation Bucket -->
            <div class="bucket">
                <div class="bucket-header">
                    <svg class="heritage-icon" viewBox="0 0 24 24">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21l-4.35-4.35"/>
                        <circle cx="11" cy="8" r="2"/>
                    </svg>
                    <h3 class="bucket-title">Research and Ideation</h3>
                    <span class="bucket-count" id="researchCount">2</span>
                </div>
                
                <div class="bucket-content" id="researchBucket">
                    <div class="effort-item fade-in">
                        <div class="item-header">
                            <svg class="heritage-icon" viewBox="0 0 24 24">
                                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                            </svg>
                            <div class="item-title">Initial Brainstorming Session</div>
                        </div>
                        <div class="item-description">
                            Voice memo exploring different approaches to the project. Covering three potential directions and weighing pros/cons of each.
                        </div>
                        <div class="item-meta">
                            <span class="item-time">2 hours ago</span>
                            <span class="item-type">Audio</span>
                        </div>
                    </div>
                    
                    <div class="effort-item fade-in">
                        <div class="item-header">
                            <svg class="heritage-icon" viewBox="0 0 24 24">
                                <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"/>
                                <polyline points="13,2 13,9 20,9"/>
                                <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                                <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                            </svg>
                            <div class="item-title">Background Research Resources</div>
                        </div>
                        <div class="item-description">
                            Collection of articles and papers on the topic. Key findings highlighted and annotated for future reference during writing phase.
                        </div>
                        <div class="item-meta">
                            <span class="item-time">1 day ago</span>
                            <span class="item-type">URLs & Files</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Writing Bucket -->
            <div class="bucket">
                <div class="bucket-header">
                    <svg class="heritage-icon" viewBox="0 0 24 24">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </svg>
                    <h3 class="bucket-title">Writing</h3>
                    <span class="bucket-count" id="writingCount">0</span>
                </div>
                
                <div class="bucket-content" id="writingBucket">
                    <div class="empty-state">
                        <svg class="heritage-icon large empty-icon" viewBox="0 0 24 24">
                            <path d="M12 5v14m-7-7l7-7 7 7"/>
                        </svg>
                        <p class="empty-text">Start capturing your writing process to see it here</p>
                    </div>
                </div>
            </div>

            <!-- Editing Bucket -->
            <div class="bucket">
                <div class="bucket-header">
                    <svg class="heritage-icon" viewBox="0 0 24 24">
                        <path d="M12 20h9"/>
                        <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                    </svg>
                    <h3 class="bucket-title">Editing</h3>
                    <span class="bucket-count" id="editingCount">0</span>
                </div>
                
                <div class="bucket-content" id="editingBucket">
                    <div class="empty-state">
                        <svg class="heritage-icon large empty-icon" viewBox="0 0 24 24">
                            <path d="M12 5v14m-7-7l7-7 7 7"/>
                        </svg>
                        <p class="empty-text">Document your editing process to see it here</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Capture Modal -->
    <div class="modal-overlay" id="captureModal">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Capture Text Note</h3>
                <p class="modal-subtitle" id="modalSubtitle">Add your thoughts and choose which phase this belongs to</p>
            </div>
            
            <div class="modal-content" id="modalContent">
                <!-- Dynamic content based on capture type -->
            </div>
            
            <div class="bucket-selector">
                <label class="bucket-selector-label">Which phase of your creative process is this for?</label>
                <div class="bucket-options">
                    <div class="bucket-option" data-bucket="research">
                        <svg class="heritage-icon bucket-option-icon" viewBox="0 0 24 24">
                            <circle cx="11" cy="11" r="8"/>
                            <path d="M21 21l-4.35-4.35"/>
                            <circle cx="11" cy="8" r="2"/>
                        </svg>
                        <div class="bucket-option-name">Research & Ideation</div>
                    </div>
                    <div class="bucket-option" data-bucket="writing">
                        <svg class="heritage-icon bucket-option-icon" viewBox="0 0 24 24">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                        </svg>
                        <div class="bucket-option-name">Writing</div>
                    </div>
                    <div class="bucket-option" data-bucket="editing">
                        <svg class="heritage-icon bucket-option-icon" viewBox="0 0 24 24">
                            <path d="M12 20h9"/>
                            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                        </svg>
                        <div class="bucket-option-name">Editing</div>
                    </div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="modal-btn secondary" onclick="closeCaptureModal()">Cancel</button>
                <button class="modal-btn primary" id="saveBtn" onclick="saveCapture()" disabled>Save</button>
            </div>
        </div>
    </div>

    <!-- Status Message -->
    <div class="status-message" id="statusMessage">
        <svg class="heritage-icon small" viewBox="0 0 24 24">
            <polyline points="20,6 9,17 4,12"/>
        </svg>
        <span id="statusText"></span>
    </div>

    <script>
        // Global state
        let sessionActive = false;
        let sessionPaused = false;
        let sessionStartTime = null;
        let sessionDuration = 0;
        let timerInterval = null;
        let currentCaptureType = null;
        let selectedBucket = null;
        let isRecording = false;
        let mediaRecorder = null;
        let audioChunks = [];

        // Session Management
        function startSession() {
            sessionActive = true;
            sessionPaused = false;
            sessionStartTime = new Date();
            
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('pauseBtn').style.display = 'flex';
            document.getElementById('endBtn').style.display = 'flex';
            document.getElementById('sessionTimer').classList.add('active');
            
            startTimer();
            showStatus('Session started - Begin documenting your creative process');
        }

        function pauseSession() {
            if (!sessionPaused) {
                sessionPaused = true;
                sessionDuration += new Date() - sessionStartTime;
                clearInterval(timerInterval);
                
                document.getElementById('pauseBtn').innerHTML = `
                    <svg class="heritage-icon small" viewBox="0 0 24 24">
                        <polygon points="5,3 19,12 5,21"/>
                    </svg>
                    Resume
                `;
                showStatus('Session paused');
            } else {
                sessionPaused = false;
                sessionStartTime = new Date();
                startTimer();
                
                document.getElementById('pauseBtn').innerHTML = `
                    <svg class="heritage-icon small" viewBox="0 0 24 24">
                        <rect x="6" y="4" width="4" height="16"/>
                        <rect x="14" y="4" width="4" height="16"/>
                    </svg>
                    Pause
                `;
                showStatus('Session resumed');
            }
        }

        function endSession() {
            sessionActive = false;
            sessionPaused = false;
            clearInterval(timerInterval);
            
            const totalTime = sessionDuration + (sessionStartTime ? new Date() - sessionStartTime : 0);
            const hours = Math.floor(totalTime / 3600000);
            const minutes = Math.floor((totalTime % 3600000) / 60000);
            
            document.getElementById('startBtn').style.display = 'flex';
            document.getElementById('pauseBtn').style.display = 'none';
            document.getElementById('endBtn').style.display = 'none';
            document.getElementById('sessionTimer').classList.remove('active');
            
            document.getElementById('sessionTimer').textContent = '00:00';
            sessionDuration = 0;
            sessionStartTime = null;
            
            document.getElementById('pauseBtn').innerHTML = `
                <svg class="heritage-icon small" viewBox="0 0 24 24">
                    <rect x="6" y="4" width="4" height="16"/>
                    <rect x="14" y="4" width="4" height="16"/>
                </svg>
                Pause
            `;
            
            if (hours > 0 || minutes > 0) {
                showStatus(`Session completed: ${hours}h ${minutes}m of creative work documented`);
            } else {
                showStatus('Session ended');
            }
        }

        function startTimer() {
            timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            if (!sessionActive || sessionPaused) return;
            
            const currentTime = sessionDuration + (new Date() - sessionStartTime);
            const hours = Math.floor(currentTime / 3600000);
            const minutes = Math.floor((currentTime % 3600000) / 60000);
            
            let display;
            if (hours > 0) {
                display = `${hours}:${minutes.toString().padStart(2, '0')}`;
            } else {
                const seconds = Math.floor((currentTime % 60000) / 1000);
                display = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }
            
            document.getElementById('sessionTimer').textContent = display;
        }

        // Modal Management
        function openCaptureModal(type) {
            currentCaptureType = type;
            selectedBucket = null;
            
            const modal = document.getElementById('captureModal');
            const title = document.getElementById('modalTitle');
            const subtitle = document.getElementById('modalSubtitle');
            const content = document.getElementById('modalContent');
            
            // Clear previous bucket selection
            document.querySelectorAll('.bucket-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Update modal based on type
            const typeConfigs = {
                text: {
                    title: 'Capture Text Note',
                    subtitle: 'Write your thoughts and choose which phase this belongs to',
                    content: `
                        <div class="input-group">
                            <label class="input-label">Your thoughts:</label>
                            <textarea class="input-field" id="textInput" placeholder="What's on your mind? Ideas, observations, questions..."></textarea>
                        </div>
                    `
                },
                audio: {
                    title: 'Record Audio',
                    subtitle: 'Capture your voice thoughts and choose which phase this belongs to',
                    content: `
                        <div class="audio-controls">
                            <button class="record-btn" id="recordBtn" onclick="toggleRecording()">
                                <svg class="heritage-icon large" viewBox="0 0 24 24">
                                    <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                                </svg>
                            </button>
                            <div class="recording-status" id="recordingStatus">Click to start recording</div>
                        </div>
                    `
                },
                screenshot: {
                    title: 'Add Screenshot',
                    subtitle: 'Upload a screenshot and add context about which phase this belongs to',
                    content: `
                        <div class="input-group">
                            <label class="input-label">Upload screenshot:</label>
                            <input type="file" id="screenshotInput" accept="image/*" style="margin-bottom: 16px;">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Context (optional):</label>
                            <textarea class="input-field" id="screenshotContext" placeholder="What does this screenshot show? Why is it relevant?"></textarea>
                        </div>
                    `
                },
                file: {
                    title: 'Add URL or File',
                    subtitle: 'Add a link or upload a file with context about which phase this belongs to',
                    content: `
                        <div class="input-group">
                            <label class="input-label">URL or upload file:</label>
                            <input type="url" class="input-field" id="urlInput" placeholder="https://" style="margin-bottom: 8px; height: auto; min-height: auto; padding: 8px 12px;">
                            <input type="file" id="fileInput" accept=".pdf,.doc,.docx,.txt,.md">
                        </div>
                        <div class="input-group">
                            <label class="input-label">Context:</label>
                            <textarea class="input-field" id="fileContext" placeholder="Why is this resource relevant? What did you learn from it?"></textarea>
                        </div>
                    `
                }
            };
            
            const config = typeConfigs[type];
            title.textContent = config.title;
            subtitle.textContent = config.subtitle;
            content.innerHTML = config.content;
            
            modal.classList.add('active');
            
            // Auto-focus first input
            setTimeout(() => {
                const firstInput = content.querySelector('input, textarea');
                if (firstInput) firstInput.focus();
            }, 300);
        }

        function closeCaptureModal() {
            const modal = document.getElementById('captureModal');
            modal.classList.remove('active');
            
            // Reset audio recording if active
            if (isRecording) {
                toggleRecording();
            }
            
            currentCaptureType = null;
            selectedBucket = null;
        }

        // Bucket Selection
        document.querySelectorAll('.bucket-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.bucket-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                selectedBucket = this.dataset.bucket;
                document.getElementById('saveBtn').disabled = !canSave();
            });
        });

        // Audio Recording
        async function toggleRecording() {
            if (!isRecording) {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                    mediaRecorder = new MediaRecorder(stream);
                    audioChunks = [];
                    
                    mediaRecorder.ondataavailable = event => {
                        audioChunks.push(event.data);
                    };
                    
                    mediaRecorder.start();
                    isRecording = true;
                    
                    const recordBtn = document.getElementById('recordBtn');
                    const status = document.getElementById('recordingStatus');
                    
                    recordBtn.classList.add('recording');
                    recordBtn.innerHTML = `
                        <svg class="heritage-icon large" viewBox="0 0 24 24">
                            <rect x="6" y="4" width="4" height="16"/>
                            <rect x="14" y="4" width="4" height="16"/>
                        </svg>
                    `;
                    status.textContent = 'Recording... click to stop';
                    
                } catch (error) {
                    showStatus('Could not access microphone');
                }
            } else {
                mediaRecorder.stop();
                isRecording = false;
                
                const recordBtn = document.getElementById('recordBtn');
                const status = document.getElementById('recordingStatus');
                
                recordBtn.classList.remove('recording');
                recordBtn.innerHTML = `
                    <svg class="heritage-icon large" viewBox="0 0 24 24">
                        <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                        <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                    </svg>
                `;
                status.textContent = 'Recording saved - choose a bucket to continue';
                
                // Stop all tracks
                mediaRecorder.stream.getTracks().forEach(track => track.stop());
                
                document.getElementById('saveBtn').disabled = !canSave();
            }
        }

        // Save Logic
        function canSave() {
            if (!selectedBucket) return false;
            
            switch (currentCaptureType) {
                case 'text':
                    return document.getElementById('textInput')?.value.trim().length > 0;
                case 'audio':
                    return !isRecording && audioChunks.length > 0;
                case 'screenshot':
                    return document.getElementById('screenshotInput')?.files.length > 0;
                case 'file':
                    const urlInput = document.getElementById('urlInput');
                    const fileInput = document.getElementById('fileInput');
                    return (urlInput?.value.trim().length > 0) || (fileInput?.files.length > 0);
                default:
                    return false;
            }
        }

        function saveCapture() {
            if (!canSave()) return;
            
            const bucketNames = {
                research: 'Research and Ideation',
                writing: 'Writing',
                editing: 'Editing'
            };
            
            const typeNames = {
                text: 'Text Note',
                audio: 'Audio Recording',
                screenshot: 'Screenshot',
                file: 'URL/File'
            };
            
            // Get content based on type
            let content = '';
            let title = '';
            
            switch (currentCaptureType) {
                case 'text':
                    content = document.getElementById('textInput').value.trim();
                    title = content.length > 50 ? content.substring(0, 47) + '...' : content;
                    break;
                case 'audio':
                    title = 'Voice Recording';
                    content = 'Audio captured during session';
                    break;
                case 'screenshot':
                    title = 'Screenshot';
                    const screenshotContext = document.getElementById('screenshotContext').value.trim();
                    content = screenshotContext || 'Visual capture from session';
                    break;
                case 'file':
                    const urlValue = document.getElementById('urlInput').value.trim();
                    const fileValue = document.getElementById('fileInput').files[0]?.name;
                    const fileContext = document.getElementById('fileContext').value.trim();
                    
                    title = urlValue || fileValue || 'Resource';
                    content = fileContext || 'Resource added to session';
                    break;
            }
            
            // Add to bucket
            addToBucket(selectedBucket, {
                title: title,
                description: content,
                type: typeNames[currentCaptureType],
                time: 'Just now'
            });
            
            closeCaptureModal();
            showStatus(`${typeNames[currentCaptureType]} added to ${bucketNames[selectedBucket]}`);
        }

        // Add to Bucket
        function addToBucket(bucketId, item) {
            const bucketContent = document.getElementById(bucketId + 'Bucket');
            const countElement = document.getElementById(bucketId + 'Count');
            
            // Remove empty state if present
            const emptyState = bucketContent.querySelector('.empty-state');
            if (emptyState) {
                emptyState.remove();
            }
            
            // Create item element
            const itemElement = document.createElement('div');
            itemElement.className = 'effort-item slide-up';
            
            const icons = {
                'Text Note': '<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14,2 14,8 20,8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10,9 9,9 8,9"/>',
                'Audio Recording': '<path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/>',
                'Screenshot': '<path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/>',
                'URL/File': '<path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"/><polyline points="13,2 13,9 20,9"/><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>'
            };
            
            itemElement.innerHTML = `
                <div class="item-header">
                    <svg class="heritage-icon" viewBox="0 0 24 24">
                        ${icons[item.type]}
                    </svg>
                    <div class="item-title">${item.title}</div>
                </div>
                <div class="item-description">${item.description}</div>
                <div class="item-meta">
                    <span class="item-time">${item.time}</span>
                    <span class="item-type">${item.type}</span>
                </div>
            `;
            
            // Insert at the beginning
            bucketContent.insertBefore(itemElement, bucketContent.firstChild);
            
            // Update count
            const currentCount = parseInt(countElement.textContent);
            countElement.textContent = currentCount + 1;
            
            // Animate count badge
            countElement.style.background = 'var(--sage-green)';
            setTimeout(() => {
                countElement.style.background = 'var(--copper-accent)';
            }, 800);
        }

        // Status Messages
        function showStatus(message) {
            const statusElement = document.getElementById('statusMessage');
            const textElement = document.getElementById('statusText');
            
            textElement.textContent = message;
            statusElement.classList.add('show');
            
            setTimeout(() => {
                statusElement.classList.remove('show');
            }, 4000);
        }

        // Keyboard Shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.metaKey || e.ctrlKey) {
                switch(e.key) {
                    case ' ':
                        e.preventDefault();
                        if (!sessionActive) {
                            startSession();
                        } else {
                            pauseSession();
                        }
                        break;
                    case 'Enter':
                        e.preventDefault();
                        if (sessionActive) {
                            endSession();
                        }
                        break;
                    case '1':
                        e.preventDefault();
                        openCaptureModal('text');
                        break;
                    case '2':
                        e.preventDefault();
                        openCaptureModal('audio');
                        break;
                    case '3':
                        e.preventDefault();
                        openCaptureModal('screenshot');
                        break;
                    case '4':
                        e.preventDefault();
                        openCaptureModal('file');
                        break;
                }
            }
            
            // Escape to close modal
            if (e.key === 'Escape') {
                closeCaptureModal();
            }
        });

        // Input validation for modal
        document.addEventListener('input', function(e) {
            if (e.target.matches('#textInput, #urlInput, #fileContext, #screenshotContext')) {
                document.getElementById('saveBtn').disabled = !canSave();
            }
        });

        document.addEventListener('change', function(e) {
            if (e.target.matches('#screenshotInput, #fileInput')) {
                document.getElementById('saveBtn').disabled = !canSave();
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                showStatus('Ready to track your creative effort - Start a session to begin');
            }, 1000);
            
            // Add staggered animation to existing items
            const existingItems = document.querySelectorAll('.effort-item');
            existingItems.forEach((item, index) => {
                setTimeout(() => {
                    item.classList.add('fade-in');
                }, index * 150);
            });
        });
    </script>
</body>
</html>
